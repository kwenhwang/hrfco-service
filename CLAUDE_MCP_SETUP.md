# Claude MCP μ„λ²„ μ„¤μ • κ°€μ΄λ“

## π― κ°μ”

HRFCO μλ¬Έ λ°μ΄ν„°λ¥Ό Claudeμ—μ„ μ§μ ‘ μ‚¬μ©ν•  μ μλ„λ΅ MCP(Model Context Protocol) μ„λ²„λ¥Ό μ„¤μ •ν•λ” λ°©λ²•μ…λ‹λ‹¤.

## π“‹ μ‚¬μ „ μ”κµ¬μ‚¬ν•­

1. Python 3.8+ μ„¤μΉ
2. ν”„λ΅μ νΈ μμ΅΄μ„± μ„¤μΉ: `pip install -r requirements.txt`
3. Claude Desktop μ•± μ„¤μΉ

## π€ μ„¤μ • λ°©λ²•

### 1. MCP μ„λ²„ μ¤€λΉ„

ν”„λ΅μ νΈμ— μ΄λ―Έ `mcp_server.py`κ°€ μ¤€λΉ„λμ–΄ μμµλ‹λ‹¤. μ΄ νμΌμ€ HRFCO APIλ¥Ό MCP ν”„λ΅ν† μ½λ΅ λν•‘ν•©λ‹λ‹¤.

### 2. Claude μ„¤μ • νμΌ μƒμ„±

Claude Desktop μ•±μ μ„¤μ • λ””λ ‰ν† λ¦¬μ— MCP μ„¤μ • νμΌμ„ μƒμ„±ν•©λ‹λ‹¤:

**Windows:**
```
%APPDATA%\Claude\claude_desktop_config.json
```

**macOS:**
```
~/Library/Application Support/Claude/claude_desktop_config.json
```

**Linux:**
```
~/.config/Claude/claude_desktop_config.json
```

### 3. μ„¤μ • νμΌ λ‚΄μ©

```json
{
  "mcpServers": {
    "hrfco-flood-control": {
      "command": "python",
      "args": [
        "C:\\Users\\20172483\\web\\hrfco-service\\mcp_server.py"
      ],
      "env": {
        "PYTHONPATH": "C:\\Users\\20172483\\web\\hrfco-service\\src"
      }
    }
  }
}
```

**μ£Όμμ‚¬ν•­:**
- `command`μ™€ `args`μ κ²½λ΅λ¥Ό μ‹¤μ  ν”„λ΅μ νΈ κ²½λ΅λ΅ μμ •ν•μ„Έμ”
- `PYTHONPATH`λ¥Ό μ‹¤μ  `src` λ””λ ‰ν† λ¦¬ κ²½λ΅λ΅ μμ •ν•μ„Έμ”

### 4. Claude μ¬μ‹μ‘

μ„¤μ • νμΌμ„ μ €μ¥ν• ν›„ Claude Desktop μ•±μ„ μ¬μ‹μ‘ν•©λ‹λ‹¤.

## π§ ν…μ¤νΈ

### MCP μ„λ²„ μ§μ ‘ ν…μ¤νΈ

```bash
python test_mcp_direct.py
```

### Claudeμ—μ„ μ‚¬μ© μμ‹

Claudeκ°€ μ¬μ‹μ‘λ ν›„, λ‹¤μκ³Ό κ°™μ€ μ§λ¬Έμ„ ν•  μ μμµλ‹λ‹¤:

1. **κ΄€μΈ΅μ† μ •λ³΄ μ΅°ν:**
   ```
   "λ¶€μ‚° μ§€μ—­μ μμ„ κ΄€μΈ΅μ† μ •λ³΄λ¥Ό μ•λ ¤μ¤"
   ```

2. **μλ¬Έ λ°μ΄ν„° μ΅°ν:**
   ```
   "μμ²λμ ν„μ¬ λ°©λ¥λ‰μ„ ν™•μΈν•΄μ¤"
   ```

3. **μ„λ²„ μƒνƒ ν™•μΈ:**
   ```
   "μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•κ³  μλ‚μ”?"
   ```

## π”§ μ‚¬μ© κ°€λ¥ν• λ„κµ¬

MCP μ„λ²„λ” λ‹¤μ λ„κµ¬λ“¤μ„ μ κ³µν•©λ‹λ‹¤:

### 1. `get_observatory_info`
- **μ„¤λ…:** μλ¬Έ κ΄€μΈ΅μ† μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤
- **λ§¤κ°λ³€μ:**
  - `hydro_type`: μλ¬Έ λ°μ΄ν„° νƒ€μ… (waterlevel, rainfall, dam, bo)

### 2. `get_hydro_data`
- **μ„¤λ…:** μλ¬Έ λ°μ΄ν„°λ¥Ό μ΅°νν•©λ‹λ‹¤
- **λ§¤κ°λ³€μ:**
  - `hydro_type`: μλ¬Έ λ°μ΄ν„° νƒ€μ… (waterlevel, rainfall, dam, bo)
  - `time_type`: μ‹κ°„ λ‹¨μ„ (10M, 1H, 1D)
  - `obs_code`: κ΄€μΈ΅μ† μ½”λ“

### 3. `get_server_health`
- **μ„¤λ…:** μ„λ²„ μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤
- **λ§¤κ°λ³€μ:** μ—†μ

### 4. `get_server_config`
- **μ„¤λ…:** μ„λ²„ μ„¤μ •μ„ ν™•μΈν•©λ‹λ‹¤
- **λ§¤κ°λ³€μ:** μ—†μ

## π“ μ§€μ›ν•λ” λ°μ΄ν„° νƒ€μ…

- **waterlevel**: μμ„ λ°μ΄ν„°
- **rainfall**: κ°•μλ‰ λ°μ΄ν„°
- **dam**: λ λ°μ΄ν„°
- **bo**: λ³΄ λ°μ΄ν„°

## β° μ§€μ›ν•λ” μ‹κ°„ λ‹¨μ„

- **10M**: 10λ¶„
- **1H**: 1μ‹κ°„
- **1D**: 1μΌ

## π” λ¬Έμ  ν•΄κ²°

### 1. MCP μ„λ²„κ°€ μ‹μ‘λμ§€ μ•λ” κ²½μ°

- Python κ²½λ΅κ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ
- `PYTHONPATH` ν™κ²½λ³€μκ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- ν”„λ΅μ νΈ μμ΅΄μ„±μ΄ μ„¤μΉλμ—λ”μ§€ ν™•μΈ

### 2. Claudeμ—μ„ λ„κµ¬κ°€ λ³΄μ΄μ§€ μ•λ” κ²½μ°

- Claude μ•±μ„ μ™„μ „ν μ¬μ‹μ‘
- μ„¤μ • νμΌ κ²½λ΅κ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ
- JSON ν•μ‹μ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈ

### 3. λ°μ΄ν„° μ΅°ν μ‹¤ν¨

- μΈν„°λ„· μ—°κ²° ν™•μΈ
- HRFCO API μ„λ²„ μƒνƒ ν™•μΈ
- κ΄€μΈ΅μ† μ½”λ“κ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ

## π“ μμ‹ λ€ν™”

**μ‚¬μ©μ:** "λ¶€μ‚° μ§€μ—­μ μλ¬Έ μƒνƒκ°€ μ–΄λ•?"

**Claude:** "λ¶€μ‚° μ§€μ—­μ μλ¬Έ μƒνƒλ¥Ό ν™•μΈν•΄λ“λ¦¬κ² μµλ‹λ‹¤. ν„μ¬ λ¶€μ‚° λ€λ™λ‚™λ™κ°•κµ κ΄€μΈ΅μ†μ μμ„λ” 3.42mμ…λ‹λ‹¤. ν™μ μ„ν—λ„λ” λ‚®μ€ μƒνƒμ΄λ©°, μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§μ΄ κ¶μ¥λ©λ‹λ‹¤."

**μ‚¬μ©μ:** "μμ²λμ λ°©λ¥λ‰μ€ μ–Όλ§λ‚ λλ‚μ”?"

**Claude:** "μμ²λμ ν„μ¬ λ°©λ¥λ‰μ€ 0.481mΒ³/sμ…λ‹λ‹¤. μ΄λ” μµμ† λ°©λ¥λ‰μΌλ΅, μ €μλ‰ ν™•λ³΄λ¥Ό μ„ν• μ •μƒμ μΈ μ΄μ μƒνƒμ…λ‹λ‹¤."

## π‰ μ™„λ£!

μ΄μ  Claudeμ—μ„ HRFCO μλ¬Έ λ°μ΄ν„°λ¥Ό μ§μ ‘ μ΅°νν•  μ μμµλ‹λ‹¤! 

## HRFCO_API_KEY ν•„μ μ•λ‚΄

- Claude/Glamaμ—μ„ MCP μ„λ²„λ¥Ό μ‚¬μ©ν•  λ•λ„ λ°λ“μ‹ λ³ΈμΈ HRFCO API ν‚¤κ°€ ν•„μ”ν•©λ‹λ‹¤.
- μμ‹μ `your-api-key-here`λ” μ‹¤μ λ΅ λ™μ‘ν•μ§€ μ•μΌλ©°, λ°λ“μ‹ λ³ΈμΈ ν‚¤λ΅ ν™κ²½λ³€μ/Secretsμ— λ“±λ΅ν•΄μ•Ό ν•©λ‹λ‹¤.
- Glama/Claudeμ—μ„ ν™κ²½λ³€μλ΅ API ν‚¤λ¥Ό μ£Όμ…ν•΄μ•Ό μ •μƒ λ™μ‘ν•©λ‹λ‹¤.

> **μ£Όμ:** API ν‚¤κ°€ μ—†μΌλ©΄ μ‹¤μ  HRFCO λ°μ΄ν„° μ΅°νκ°€ λ¶κ°€ν•©λ‹λ‹¤. λ„κµ¬λ‚ λ°”λ΅ μ‚¬μ©ν•  μ μλ” μ„λΉ„μ¤κ°€ μ•„λ‹λ©°, λ°λ“μ‹ λ³ΈμΈ ν‚¤λ¥Ό λ°κΈ‰λ°›μ•„μ•Ό ν•©λ‹λ‹¤. 

Claude λ¬΄λ£ λ²„μ „μ ν•κ³„λ΅ ν…μ¤νΈκ°€ μ–΄λ ¤μΈ λ•, λ‹¤μκ³Ό κ°™μ€ λ€μ• ν…μ¤νΈ λ°©λ²•μ΄ μμµλ‹λ‹¤:

---

### 1. **μ§μ ‘ μ‹¤ν–‰ ν…μ¤νΈ μ¤ν¬λ¦½νΈ**
- μ΄λ―Έ μ κ³µλ `test_simple_regions.py`, `test_few_regions.py`, `test_multiple_regions.py` λ“± Python ν…μ¤νΈ μ¤ν¬λ¦½νΈλ¥Ό μ§μ ‘ μ‹¤ν–‰ν•μ—¬ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
- λ…λ Ήμ–΄ μμ‹:
  ```
  python test_simple_regions.py
  ```

---

### 2. **λ…λ Ήμ¤„ κ°„μ΄ ν…μ¤νΈ μ¤ν¬λ¦½νΈ**
- λ°©κΈ λ§λ“  `test_cli_simple.py`μ²λΌ, λ…λ Ήμ¤„μ—μ„ λ°”λ΅ μ‹¤ν–‰ κ°€λ¥ν• κ°„λ‹¨ν• ν…μ¤νΈ μ¤ν¬λ¦½νΈλ¥Ό λ§λ“¤μ–΄μ„ μ£Όμ” κΈ°λ¥(μ§€μ—­ λ§¤ν•‘, κ±°λ¦¬ κ³„μ‚°, ν™κ²½λ³€μ, MCP μ„λ²„ μ„ν¬νΈ λ“±)μ„ λΉ λ¥΄κ² κ²€μ¦ν•  μ μμµλ‹λ‹¤.
- λ…λ Ήμ–΄ μμ‹:
  ```
  python test_cli_simple.py
  ```

---

### 3. **μ§μ ‘ API νΈμ¶ ν…μ¤νΈ**
- `test_direct_api.py`μ²λΌ μ‹¤μ  APIλ¥Ό μ§μ ‘ νΈμ¶ν•λ” μ¤ν¬λ¦½νΈλ¥Ό λ§λ“¤μ–΄, Claude μ—†μ΄λ„ API μ‘λ‹µμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
- λ…λ Ήμ–΄ μμ‹:
  ```
  python test_direct_api.py
  ```

---

### 4. **μ›Ή μΈν„°νμ΄μ¤ ν…μ¤νΈ**
- Flask λ“±μΌλ΅ κ°„λ‹¨ν• μ›Ή UIλ¥Ό λ§λ“¤μ–΄ λΈλΌμ°μ €μ—μ„ μ§μ ‘ μ£Όμ†/λ°κ²½/μ ν•μ„ μ…λ ¥ν•΄ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
- μμ‹: `test_web_interface.py` μ‹¤ν–‰ ν›„, λΈλΌμ°μ €μ—μ„ `http://localhost:5000` μ ‘μ†

---

### 5. **Postman, curl λ“± μ™Έλ¶€ ν΄ ν™μ©**
- MCP μ„λ²„κ°€ HTTP APIλ¥Ό μ κ³µν•λ‹¤λ©΄, Postmanμ΄λ‚ curlλ΅ μ§μ ‘ μ—”λ“ν¬μΈνΈλ¥Ό νΈμ¶ν•΄ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

---

**μ •λ¦¬:**  
Claude μ—†μ΄λ„ λ‹¤μ–‘ν• μλ™ν™”/μλ™ ν…μ¤νΈ λ°©λ²•μ΄ μμΌλ‹, μ„μ μ¤ν¬λ¦½νΈλ‚ μ›Ή UI, λλ” API νΈμ¶ ν΄μ„ ν™μ©ν•΄ μ¶©λ¶„ν κ²€μ¦ν•  μ μμµλ‹λ‹¤.  
μ¶”κ°€λ΅ ν•„μ”ν• ν…μ¤νΈ μλ™ν™”λ‚ μƒν” μ½”λ“κ°€ ν•„μ”ν•λ©΄ μ–Έμ λ“  μ”μ²­ν•΄μ£Όμ„Έμ”! 